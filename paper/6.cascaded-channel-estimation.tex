\subsection{Cascaded Channel Estimation}
To understand how the actors (and in particular the RISs controller) estimate the channel gain between them, we redirect to the paper \textit{Cascaded Channel Estimation for Large Intelligent Metasurface Assisted Massive MIMO} \cite{8879620}. While we will not summarize the content here, we will still give a general idea of how to use the algorithm in the paper to estimate $G$ and $H$.
\begin{itemize}
  \item The transmitter comunicates to the RIS controller a setup message $x'$ that it will send to the receiver;
  \item The RIS will set a random $P'$; \footnote{As discussed before, in case of multiple RIS in series we set all of them randomly. Later, we setup just the last $P_M$ correctly based on $G'$ and $H$ estimations.}
  \item The receiver gets a signal $y'$ (which will mean nothing), and sends it back to the RIS controller;
  \item Based on $x', y', P'$ the RIS controller estimates $G, H$ and correctly setup $P$;
  \item The transmitter sends $x$, and the receiver gets $y$ which can correctly convert back;
  \item If transmitter and receiver are moving, the procedure will start all over. Otherwise, $G$ and $H$ remain the same, and the RIS controller can just create a new $P$ for the next messages.
\end{itemize}